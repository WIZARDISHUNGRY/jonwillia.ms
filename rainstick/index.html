<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Happy Birthday, Ian Johnson!</title>
<script>
function play(f) {
    var snd = new Audio("sound/"+f+".mp3");
    snd.play();
    return snd;
}
function getRandomInt(min, max)  
{  
  return Math.floor(Math.random() * (max - min + 1)) + min;  
}  

function rattle()
{
    if(Math.random() <.03)
    {
        snd=play("RATTLE_"+getRandomInt(1,4));
        snd.volume=.2;
    }
}

function shake(stick) {
    c = (stick.getAttribute("class"));
    c=c=="one"?"two":"one";
    stick.setAttribute("class",c);
    play(getRandomInt(1,17));
}
// --
var BrowserDetect = {
	init: function () {
		this.browser = this.searchString(this.dataBrowser) || "An unknown browser";
		this.version = this.searchVersion(navigator.userAgent)
			|| this.searchVersion(navigator.appVersion)
			|| "an unknown version";
		this.OS = this.searchString(this.dataOS) || "an unknown OS";
	},
	searchString: function (data) {
		for (var i=0;i<data.length;i++)	{
			var dataString = data[i].string;
			var dataProp = data[i].prop;
			this.versionSearchString = data[i].versionSearch || data[i].identity;
			if (dataString) {
				if (dataString.indexOf(data[i].subString) != -1)
					return data[i].identity;
			}
			else if (dataProp)
				return data[i].identity;
		}
	},
	searchVersion: function (dataString) {
		var index = dataString.indexOf(this.versionSearchString);
		if (index == -1) return;
		return parseFloat(dataString.substring(index+this.versionSearchString.length+1));
	},
	dataBrowser: [
		{
			string: navigator.userAgent,
			subString: "Chrome",
			identity: "Chrome"
		},
		{ 	string: navigator.userAgent,
			subString: "OmniWeb",
			versionSearch: "OmniWeb/",
			identity: "OmniWeb"
		},
		{
			string: navigator.vendor,
			subString: "Apple",
			identity: "Safari",
			versionSearch: "Version"
		},
		{
			prop: window.opera,
			identity: "Opera"
		},
		{
			string: navigator.vendor,
			subString: "iCab",
			identity: "iCab"
		},
		{
			string: navigator.vendor,
			subString: "KDE",
			identity: "Konqueror"
		},
		{
			string: navigator.userAgent,
			subString: "Firefox",
			identity: "Firefox"
		},
		{
			string: navigator.vendor,
			subString: "Camino",
			identity: "Camino"
		},
		{		// for newer Netscapes (6+)
			string: navigator.userAgent,
			subString: "Netscape",
			identity: "Netscape"
		},
		{
			string: navigator.userAgent,
			subString: "MSIE",
			identity: "Explorer",
			versionSearch: "MSIE"
		},
		{
			string: navigator.userAgent,
			subString: "Gecko",
			identity: "Mozilla",
			versionSearch: "rv"
		},
		{ 		// for older Netscapes (4-)
			string: navigator.userAgent,
			subString: "Mozilla",
			identity: "Netscape",
			versionSearch: "Mozilla"
		}
	],
	dataOS : [
		{
			string: navigator.platform,
			subString: "Win",
			identity: "Windows"
		},
		{
			string: navigator.platform,
			subString: "Mac",
			identity: "Mac"
		},
		{
			   string: navigator.userAgent,
			   subString: "iPhone",
			   identity: "iPhone/iPod"
	    },
		{
			string: navigator.platform,
			subString: "Linux",
			identity: "Linux"
		}
	]

};
BrowserDetect.init();
good = false;
switch(BrowserDetect.browser) {
    case 'Safari':
        if(BrowserDetect.version>=4)
            good=true;
        break;
    case 'Chrome':
        if(BrowserDetect.version>=5)
            good=true;
        break;
    case 'Firefox':
        if(BrowserDetect.version>=4)
            good=true;
        break;
    default:
}
    //alert(BrowserDetect.browser + ' ' + BrowserDetect.version+ ' good='+good);
    if(!good)
        document.location="fail.html";
// --
</script>
<style>
    .one {
        -webkit-transition: all 5s ease-in-out;
        -moz-transition: all 5s ease-in-out;
        -o-transition: all 5s ease-in-out;
        -webkit-transform: rotate(360deg);
        -moz-transform: rotate(360deg);
        -o-transform: rotate(360deg);
    }
    .two { 
        -webkit-transition: all 5s ease-in-out;
        -moz-transition: all 5s ease-in-out;
        -o-transition: all 5s ease-in-out;
        -webkit-transform: rotate(180deg);
        -moz-transform: rotate(180deg);
        -o-transform: rotate(180deg);
    }
    embed {
    width: 0; height: 0;
        position: fixed;
        left: 0px;
        top: 0px;
    }
    body { overflow: hidden; text-align: center;  background:url("Jungle_Background_by_Lil_Mz.jpg"); background-position:center 0%;}
    #stick { height: 90% }
    p { display: none; }
</style>
</head>
<body>
<p>
I HOPE IAN ENJOYS THIS DOPE JAVASCRIPT RAINSTICK
</p>
<img id="stick" src="stick.png" onmousemove="rattle();" class="one" onclick="shake(this);">
</body>
</html>
